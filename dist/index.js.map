{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/logger.ts","../src/transport/console.ts","../src/transport/http.ts","../src/transport/localStorage.ts","../src/auto-tracker.ts","../src/transport/indexedDB.ts","../src/index.ts"],"sourcesContent":["export const generateId = (): string => {\n  return Math.random().toString(36).substr(2, 9) + Date.now().toString(36);\n};\n\nexport const getBrowserInfo = () => {\n  if (typeof navigator === 'undefined') return null;\n  \n  const userAgent = navigator.userAgent;\n  let browser = 'Unknown';\n  \n  if (userAgent.indexOf('Chrome') > -1) browser = 'Chrome';\n  else if (userAgent.indexOf('Firefox') > -1) browser = 'Firefox';\n  else if (userAgent.indexOf('Safari') > -1) browser = 'Safari';\n  else if (userAgent.indexOf('Edge') > -1) browser = 'Edge';\n  else if (userAgent.indexOf('Opera') > -1) browser = 'Opera';\n  \n  return browser;\n};\n\nexport const getDeviceInfo = () => {\n  if (typeof navigator === 'undefined') {\n    return { type: 'unknown' as const, os: 'unknown', browser: 'unknown' };\n  }\n  \n  const userAgent = navigator.userAgent;\n  let type: 'mobile' | 'tablet' | 'desktop' | 'unknown' = 'desktop';\n  let os = 'Unknown';\n  \n  // Détection du type d'appareil\n  if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)) {\n    if (/iPad/i.test(userAgent)) {\n      type = 'tablet';\n    } else {\n      type = 'mobile';\n    }\n  }\n  \n  // Détection de l'OS\n  if (userAgent.indexOf('Windows') > -1) os = 'Windows';\n  else if (userAgent.indexOf('Mac') > -1) os = 'macOS';\n  else if (userAgent.indexOf('Linux') > -1) os = 'Linux';\n  else if (userAgent.indexOf('Android') > -1) os = 'Android';\n  else if (userAgent.indexOf('iOS') > -1) os = 'iOS';\n  \n  return {\n    type,\n    os,\n    browser: getBrowserInfo()\n  };\n};\n\nexport const debounce = <T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): ((...args: Parameters<T>) => void) => {\n  let timeout: any;\n  \n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n};\n\nexport const throttle = <T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): ((...args: Parameters<T>) => void) => {\n  let inThrottle: boolean;\n  \n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      func(...args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\nexport const isElementVisible = (element: Element): boolean => {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n};\n\nexport const getElementSelector = (element: Element): string => {\n  if (element.id) {\n    return `#${element.id}`;\n  }\n  \n  if (element.className) {\n    const classes = element.className.split(' ').filter(Boolean);\n    if (classes.length > 0) {\n      return `.${classes.join('.')}`;\n    }\n  }\n  \n  const tagName = element.tagName.toLowerCase();\n  const parent = element.parentElement;\n  \n  if (!parent) {\n    return tagName;\n  }\n  \n  const siblings = (parent.children ? Array.prototype.slice.call(parent.children) : [])\n    .filter((child: any) => child.tagName === element.tagName);\n  if (siblings.length === 1) {\n    return `${getElementSelector(parent)} > ${tagName}`;\n  }\n  \n  const index = siblings.indexOf(element) + 1;\n  return `${getElementSelector(parent)} > ${tagName}:nth-child(${index})`;\n};\n\nexport const sanitizeData = (data: any, maxDepth = 3): any => {\n  if (maxDepth <= 0) {\n    return '[Max Depth Reached]';\n  }\n  \n  if (data === null || data === undefined) {\n    return data;\n  }\n  \n  if (typeof data === 'string' || typeof data === 'number' || typeof data === 'boolean') {\n    return data;\n  }\n  \n  if (data instanceof Error) {\n    return {\n      name: data.name,\n      message: data.message,\n      stack: data.stack\n    };\n  }\n  \n  if (Array.isArray(data)) {\n    return data.slice(0, 100).map(item => sanitizeData(item, maxDepth - 1));\n  }\n  \n  if (typeof data === 'object') {\n    const sanitized: any = {};\n    let count = 0;\n    \n    for (const key in data) {\n      if (data.hasOwnProperty(key)) {\n        if (count >= 50) break; // Limite le nombre de propriétés\n        \n        try {\n          sanitized[key] = sanitizeData(data[key], maxDepth - 1);\n          count++;\n        } catch (error) {\n          sanitized[key] = '[Circular Reference]';\n        }\n      }\n    }\n    \n    return sanitized;\n  }\n  \n  return '[Unsupported Type]';\n};\n","import { generateId, sanitizeData } from './utils';\nimport type {\n  LogLevel,\n  LogEntry,\n  LogContext,\n  Transport,\n  LogFilter\n} from '../types';\n\ninterface LoggerConfig {\n  level: LogLevel;\n  context: LogContext;\n  bufferSize: number;\n  flushInterval: number;\n  filters: LogFilter[];\n  sampling: number;\n  onError: (error: Error) => void;\n}\n\nconst LOG_LEVELS = {\n  debug: 0,\n  info: 1,\n  warn: 2,\n  error: 3\n};\n\nexport class Logger {\n  private config: LoggerConfig;\n  private transports: Transport[] = [];\n  private buffer: LogEntry[] = [];\n  private flushTimer: any;\n  private context: LogContext;\n\n  constructor(config: LoggerConfig) {\n    this.config = config;\n    this.context = config.context;\n    this.startFlushTimer();\n  }\n\n  log(level: LogLevel, message: string, data?: any): void {\n    try {\n      // Vérification du niveau de log\n      if (LOG_LEVELS[level] < LOG_LEVELS[this.config.level]) {\n        return;\n      }\n\n      // Sampling\n      if (Math.random() > this.config.sampling) {\n        return;\n      }\n\n      // Création de l'entrée de log\n      const entry: LogEntry = {\n        id: generateId(),\n        timestamp: Date.now(),\n        level,\n        message,\n        data: data ? sanitizeData(data) : undefined,\n        context: { ...this.context }\n      };\n\n      // Application des filtres\n      if (!this.shouldLog(entry)) {\n        return;\n      }\n\n      // Ajout au buffer\n      this.addToBuffer(entry);\n\n      // Flush immédiat pour les erreurs\n      if (level === 'error') {\n        this.flush();\n      }\n    } catch (error) {\n      this.config.onError(error as Error);\n    }\n  }\n\n  addTransport(transport: Transport): void {\n    this.transports.push(transport);\n  }\n\n  updateContext(context: LogContext): void {\n    this.context = context;\n  }\n\n  async flush(): Promise<void> {\n    if (this.buffer.length === 0) {\n      return;\n    }\n\n    const entries = [...this.buffer];\n    this.buffer = [];\n\n    const promises = this.transports.map(async (transport) => {\n      try {\n        await transport.send(entries);\n      } catch (error) {\n        this.config.onError(error as Error);\n      }\n    });\n\n    await Promise.all(promises);\n  }\n\n  destroy(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer);\n    }\n    this.flush();\n    this.transports = [];\n    this.buffer = [];\n  }\n\n  private shouldLog(entry: LogEntry): boolean {\n    return this.config.filters.every(filter => {\n      // Filtrage par niveau\n      if (filter.level && !filter.level.includes(entry.level)) {\n        return false;\n      }\n\n      // Filtrage par message\n      if (filter.message && !filter.message.test(entry.message)) {\n        return false;\n      }\n\n      // Filtrage par contexte\n      if (filter.context && entry.context && !filter.context(entry.context)) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  private addToBuffer(entry: LogEntry): void {\n    this.buffer.push(entry);\n\n    // Limitation de la taille du buffer\n    if (this.buffer.length > this.config.bufferSize) {\n      this.buffer = this.buffer.slice(-this.config.bufferSize);\n    }\n  }\n\n  private startFlushTimer(): void {\n    this.flushTimer = setInterval(() => {\n      this.flush();\n    }, this.config.flushInterval);\n  }\n}","import type { Transport, LogEntry, LogLevel } from '../../types';\n\nexport class ConsoleTransport implements Transport {\n  name = 'console';\n  private debug: boolean;\n\n  constructor(debug = true) {\n    this.debug = debug;\n  }\n\n  send(entries: LogEntry[]): void {\n    if (!this.debug || typeof console === 'undefined') {\n      return;\n    }\n\n    entries.forEach(entry => {\n      const logMethod = this.getConsoleMethod(entry.level);\n      const timestamp = new Date(entry.timestamp).toISOString();\n      \n      if (entry.data) {\n        logMethod(\n          `[${timestamp}] [${entry.level.toUpperCase()}] ${entry.message}`,\n          entry.data\n        );\n      } else {\n        logMethod(`[${timestamp}] [${entry.level.toUpperCase()}] ${entry.message}`);\n      }\n\n      // Log du contexte pour le debug\n      if (this.debug && entry.level === 'debug' && entry.context) {\n        console.groupCollapsed('Context');\n        console.table(entry.context);\n        console.groupEnd();\n      }\n    });\n  }\n\n  private getConsoleMethod(level: LogLevel): (...args: any[]) => void {\n    switch (level) {\n      case 'debug':\n        return console.debug || console.log;\n      case 'info':\n        return console.info || console.log;\n      case 'warn':\n        return console.warn || console.log;\n      case 'error':\n        return console.error || console.log;\n      default:\n        return console.log;\n    }\n  }\n}","import type { Transport, LogEntry, HttpTransportConfig } from '../../types';\n\nexport class HttpTransport implements Transport {\n  name = 'http';\n  private config: HttpTransportConfig;\n  private queue: LogEntry[] = [];\n  private isProcessing = false;\n\n  constructor(config: HttpTransportConfig) {\n    this.config = {\n      timeout: 5000,\n      retries: 3,\n      batchSize: 10,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      ...config\n    };\n  }\n\n  async send(entries: LogEntry[]): Promise<void> {\n    this.queue.push(...entries);\n    \n    if (!this.isProcessing) {\n      await this.processQueue();\n    }\n  }\n\n  async flush(): Promise<void> {\n    await this.processQueue();\n  }\n\n  private async processQueue(): Promise<void> {\n    if (this.isProcessing || this.queue.length === 0) {\n      return;\n    }\n\n    this.isProcessing = true;\n\n    while (this.queue.length > 0) {\n      const batch = this.queue.splice(0, this.config.batchSize);\n      await this.sendBatch(batch);\n    }\n\n    this.isProcessing = false;\n  }\n\n  private async sendBatch(entries: LogEntry[]): Promise<void> {\n    const payload = {\n      entries,\n      timestamp: Date.now(),\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n    };\n\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt <= this.config.retries!; attempt++) {\n      try {\n        await this.makeRequest(payload);\n        return; // Succès, on sort de la boucle\n      } catch (error) {\n        lastError = error as Error;\n        \n        if (attempt < this.config.retries!) {\n          // Attendre avant de retry avec backoff exponentiel\n          await this.delay(Math.pow(2, attempt) * 1000);\n        }\n      }\n    }\n\n    // Si on arrive ici, toutes les tentatives ont échoué\n    console.error('Failed to send logs after retries:', lastError);\n  }\n\n  private async makeRequest(payload: any): Promise<void> {\n    if (typeof fetch !== 'undefined') {\n      return this.fetchRequest(payload);\n    } else if (typeof XMLHttpRequest !== 'undefined') {\n      return this.xhrRequest(payload);\n    } else {\n      throw new Error('No HTTP client available');\n    }\n  }\n\n  private async fetchRequest(payload: any): Promise<void> {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.config.timeout);\n\n    try {\n      const response = await fetch(this.config.endpoint, {\n        method: 'POST',\n        headers: this.config.headers,\n        body: JSON.stringify(payload),\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  private async xhrRequest(payload: any): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      \n      xhr.timeout = this.config.timeout!;\n      xhr.ontimeout = () => reject(new Error('Request timeout'));\n      xhr.onerror = () => reject(new Error('Network error'));\n      xhr.onload = () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          resolve();\n        } else {\n          reject(new Error(`HTTP error! status: ${xhr.status}`));\n        }\n      };\n\n      xhr.open('POST', this.config.endpoint);\n      \n      // Set headers\n      if (this.config.headers) {\n        for (const key in this.config.headers) {\n          if (this.config.headers.hasOwnProperty(key)) {\n            xhr.setRequestHeader(key, this.config.headers[key]);\n          }\n        }\n      }\n\n      xhr.send(JSON.stringify(payload));\n    });\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}","import type { Transport, LogEntry } from '../../types';\n\nexport interface LocalStorageTransportConfig {\n  key?: string;\n  maxEntries?: number;\n  compress?: boolean;\n}\n\nexport class LocalStorageTransport implements Transport {\n  name = 'localStorage';\n  private config: Required<LocalStorageTransportConfig>;\n\n  constructor(config: LocalStorageTransportConfig = {}) {\n    this.config = {\n      key: 'shadowtrace_logs',\n      maxEntries: 1000,\n      compress: false,\n      ...config\n    };\n\n    if (typeof localStorage === 'undefined') {\n      throw new Error('localStorage is not available');\n    }\n  }\n\n  send(entries: LogEntry[]): void {\n    try {\n      const existingLogs = this.getLogs();\n      const allLogs = [...existingLogs, ...entries];\n\n      // Limiter le nombre d'entrées\n      const limitedLogs = allLogs.slice(-this.config.maxEntries);\n\n      this.saveLogs(limitedLogs);\n    } catch (error) {\n      console.error('Failed to save logs to localStorage:', error);\n    }\n  }\n\n  getLogs(): LogEntry[] {\n    try {\n      const data = localStorage.getItem(this.config.key);\n      if (!data) {\n        return [];\n      }\n\n      return JSON.parse(data);\n    } catch (error) {\n      console.error('Failed to parse logs from localStorage:', error);\n      return [];\n    }\n  }\n\n  clearLogs(): void {\n    localStorage.removeItem(this.config.key);\n  }\n\n  exportLogs(): string {\n    const logs = this.getLogs();\n    return JSON.stringify(logs, null, 2);\n  }\n\n  private saveLogs(logs: LogEntry[]): void {\n    const data = JSON.stringify(logs);\n    localStorage.setItem(this.config.key, data);\n  }\n}\n","import { debounce, throttle, getElementSelector } from './utils';\nimport type { AutoTrackConfig, AutoTrackEvent } from '../types';\n\nexport class AutoTracker {\n  private config: Required<AutoTrackConfig>;\n  private onEvent: (event: AutoTrackEvent) => void;\n  private listeners: Array<() => void> = [];\n  private isActive = false;\n\n  constructor(config: AutoTrackConfig, onEvent: (event: AutoTrackEvent) => void) {\n    this.config = {\n      clicks: true,\n      inputs: true,\n      scrolls: false,\n      navigation: true,\n      errors: true,\n      performance: false,\n      selectors: {\n        ignore: ['[data-shadow-ignore]', '.shadow-ignore'],\n        track: []\n      },\n      ...config\n    };\n    this.onEvent = onEvent;\n  }\n\n  start(): void {\n    if (this.isActive || typeof window === 'undefined') {\n      return;\n    }\n\n    this.isActive = true;\n\n    if (this.config.clicks) {\n      this.trackClicks();\n    }\n\n    if (this.config.inputs) {\n      this.trackInputs();\n    }\n\n    if (this.config.scrolls) {\n      this.trackScrolls();\n    }\n\n    if (this.config.navigation) {\n      this.trackNavigation();\n    }\n\n    if (this.config.performance) {\n      this.trackPerformance();\n    }\n  }\n\n  stop(): void {\n    if (!this.isActive) {\n      return;\n    }\n\n    this.isActive = false;\n    this.listeners.forEach(cleanup => cleanup());\n    this.listeners = [];\n  }\n\n  private trackClicks(): void {\n    const handleClick = (event: MouseEvent) => {\n      const target = event.target as Element;\n      \n      if (!target || this.shouldIgnoreElement(target)) {\n        return;\n      }\n\n      const eventData: AutoTrackEvent = {\n        type: 'click',\n        element: {\n          tagName: target.tagName,\n          id: target.id || undefined,\n          className: target.className || undefined,\n          text: this.getElementText(target),\n          attributes: this.getElementAttributes(target)\n        },\n        data: {\n          x: event.clientX,\n          y: event.clientY,\n          button: event.button,\n          ctrlKey: event.ctrlKey,\n          shiftKey: event.shiftKey,\n          altKey: event.altKey,\n          selector: getElementSelector(target)\n        }\n      };\n\n      this.onEvent(eventData);\n    };\n\n    document.addEventListener('click', handleClick, true);\n    this.listeners.push(() => {\n      document.removeEventListener('click', handleClick, true);\n    });\n  }\n\n  private trackInputs(): void {\n    const handleInput = debounce((event: Event) => {\n      const target = event.target as HTMLInputElement;\n      \n      if (!target || this.shouldIgnoreElement(target)) {\n        return;\n      }\n\n      const eventData: AutoTrackEvent = {\n        type: 'input',\n        element: {\n          tagName: target.tagName,\n          id: target.id || undefined,\n          className: target.className || undefined,\n          attributes: this.getElementAttributes(target)\n        },\n        data: {\n          type: target.type,\n          value: this.sanitizeInputValue(target),\n          selector: getElementSelector(target)\n        }\n      };\n\n      this.onEvent(eventData);\n    }, 500);\n\n    document.addEventListener('input', handleInput, true);\n    document.addEventListener('change', handleInput, true);\n    \n    this.listeners.push(() => {\n      document.removeEventListener('input', handleInput, true);\n      document.removeEventListener('change', handleInput, true);\n    });\n  }\n\n  private trackScrolls(): void {\n    const handleScroll = throttle(() => {\n      const eventData: AutoTrackEvent = {\n        type: 'scroll',\n        data: {\n          scrollX: window.scrollX,\n          scrollY: window.scrollY,\n          scrollHeight: document.documentElement.scrollHeight,\n          clientHeight: window.innerHeight,\n          scrollPercentage: Math.round(\n            (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100\n          )\n        }\n      };\n\n      this.onEvent(eventData);\n    }, 1000);\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n    this.listeners.push(() => {\n      window.removeEventListener('scroll', handleScroll);\n    });\n  }\n\n  private trackNavigation(): void {\n    // Navigation via History API\n    const self = this;\n    const originalPushState = history.pushState;\n    const originalReplaceState = history.replaceState;\n\n    history.pushState = function(state: any, title: any, url?: any) {\n      originalPushState.call(history, state, title, url);\n      self.onNavigationEvent('pushstate', url);\n    };\n\n    history.replaceState = function(state: any, title: any, url?: any) {\n      originalReplaceState.call(history, state, title, url);\n      self.onNavigationEvent('replacestate', url);\n    };\n\n    // Navigation via popstate\n    const handlePopState = (event: PopStateEvent) => {\n      this.onNavigationEvent('popstate', window.location.href);\n    };\n\n    window.addEventListener('popstate', handlePopState);\n\n    this.listeners.push(() => {\n      history.pushState = originalPushState;\n      history.replaceState = originalReplaceState;\n      window.removeEventListener('popstate', handlePopState);\n    });\n  }\n\n  private trackPerformance(): void {\n    if (typeof performance !== 'undefined' && performance.getEntriesByType) {\n      // Page Load Performance\n      window.addEventListener('load', () => {\n        setTimeout(() => {\n          const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;\n          if (navigation) {\n            const eventData: AutoTrackEvent = {\n              type: 'custom',\n              data: {\n                event: 'page_load_performance',\n                loadTime: navigation.loadEventEnd - navigation.loadEventStart,\n                domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,\n                firstPaint: this.getFirstPaint(),\n                firstContentfulPaint: this.getFirstContentfulPaint()\n              }\n            };\n            this.onEvent(eventData);\n          }\n        }, 0);\n      });\n    }\n  }\n\n  private onNavigationEvent(type: string, url: string | null): void {\n    const eventData: AutoTrackEvent = {\n      type: 'navigation',\n      data: {\n        type,\n        url: url || window.location.href,\n        referrer: document.referrer,\n        timestamp: Date.now()\n      }\n    };\n\n    this.onEvent(eventData);\n  }\n\n  private shouldIgnoreElement(element: Element): boolean {\n    // Vérifier les sélecteurs à ignorer\n    if (this.config.selectors.ignore) {\n      for (const selector of this.config.selectors.ignore) {\n        if (element.matches && element.matches(selector)) {\n          return true;\n        }\n      }\n    }\n\n    // Si des sélecteurs de tracking sont spécifiés, ne tracker que ceux-là\n    if (this.config.selectors.track && this.config.selectors.track.length > 0) {\n      for (const selector of this.config.selectors.track) {\n        if (element.matches && element.matches(selector)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  private getElementText(element: Element): string {\n    const text = element.textContent || '';\n    return text.trim().substring(0, 100); // Limiter la longueur\n  }\n\n  private getElementAttributes(element: Element): Record<string, string> {\n    const attributes: Record<string, string> = {};\n    const importantAttrs = ['id', 'class', 'name', 'type', 'href', 'src', 'alt', 'title'];\n    \n    importantAttrs.forEach(attr => {\n      const value = element.getAttribute(attr);\n      if (value) {\n        attributes[attr] = value;\n      }\n    });\n\n    return attributes;\n  }\n\n  private sanitizeInputValue(input: HTMLInputElement): string {\n    // Ne pas logger les valeurs sensibles\n    const sensitiveTypes = ['password', 'email', 'tel', 'credit-card'];\n    const sensitiveNames = ['password', 'email', 'phone', 'credit', 'card', 'ssn'];\n    \n    if (sensitiveTypes.includes(input.type.toLowerCase())) {\n      return '[REDACTED]';\n    }\n    \n    const name = (input.name || input.id || '').toLowerCase();\n    if (sensitiveNames.some(sensitive => name.includes(sensitive))) {\n      return '[REDACTED]';\n    }\n\n    // Limiter la longueur\n    return input.value.substring(0, 100);\n  }\n\n  private getFirstPaint(): number | null {\n    const entries = performance.getEntriesByType('paint');\n    const firstPaint = entries.find(entry => entry.name === 'first-paint');\n    return firstPaint ? firstPaint.startTime : null;\n  }\n\n  private getFirstContentfulPaint(): number | null {\n    const entries = performance.getEntriesByType('paint');\n    const firstContentfulPaint = entries.find(entry => entry.name === 'first-contentful-paint');\n    return firstContentfulPaint ? firstContentfulPaint.startTime : null;\n  }\n}\n","import type { Transport, LogEntry } from '../../types';\n\nexport interface IndexedDBTransportConfig {\n  dbName?: string;\n  storeName?: string;\n  version?: number;\n  maxEntries?: number;\n}\n\nexport class IndexedDBTransport implements Transport {\n  name = 'indexedDB';\n  private config: Required<IndexedDBTransportConfig>;\n  private db: IDBDatabase | null = null;\n  private isInitialized = false;\n\n  constructor(config: IndexedDBTransportConfig = {}) {\n    this.config = {\n      dbName: 'ShadowTraceLogs',\n      storeName: 'logs',\n      version: 1,\n      maxEntries: 10000,\n      ...config\n    };\n\n    if (typeof indexedDB === 'undefined') {\n      throw new Error('IndexedDB is not available');\n    }\n\n    this.init();\n  }\n\n  async send(entries: LogEntry[]): Promise<void> {\n    await this.ensureInitialized();\n    \n    if (!this.db) {\n      throw new Error('Database not initialized');\n    }\n\n    const transaction = this.db.transaction([this.config.storeName], 'readwrite');\n    const store = transaction.objectStore(this.config.storeName);\n\n    const promises = entries.map(entry => {\n      return new Promise<void>((resolve, reject) => {\n        const request = store.add(entry);\n        request.onsuccess = () => resolve();\n        request.onerror = () => reject(request.error);\n      });\n    });\n\n    await Promise.all(promises);\n    \n    // Nettoyer les anciens logs si nécessaire\n    await this.cleanup();\n  }\n\n  async getLogs(limit = 100): Promise<LogEntry[]> {\n    await this.ensureInitialized();\n    \n    if (!this.db) {\n      return [];\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.config.storeName], 'readonly');\n      const store = transaction.objectStore(this.config.storeName);\n      const request = store.getAll();\n\n      request.onsuccess = () => {\n        const logs = request.result.slice(-limit);\n        resolve(logs);\n      };\n\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  async clearLogs(): Promise<void> {\n    await this.ensureInitialized();\n    \n    if (!this.db) {\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.config.storeName], 'readwrite');\n      const store = transaction.objectStore(this.config.storeName);\n      const request = store.clear();\n\n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }\n\n  private async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.config.dbName, this.config.version);\n\n      request.onerror = () => reject(request.error);\n      \n      request.onsuccess = () => {\n        this.db = request.result;\n        this.isInitialized = true;\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n        \n        if (!db.objectStoreNames.contains(this.config.storeName)) {\n          const store = db.createObjectStore(this.config.storeName, {\n            keyPath: 'id',\n            autoIncrement: false\n          });\n          \n          store.createIndex('timestamp', 'timestamp', { unique: false });\n          store.createIndex('level', 'level', { unique: false });\n        }\n      };\n    });\n  }\n\n  private async ensureInitialized(): Promise<void> {\n    if (!this.isInitialized) {\n      await this.init();\n    }\n  }\n\n  private async cleanup(): Promise<void> {\n    if (!this.db) {\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = this.db!.transaction([this.config.storeName], 'readwrite');\n      const store = transaction.objectStore(this.config.storeName);\n      \n      // Compter les entrées\n      const countRequest = store.count();\n      \n      countRequest.onsuccess = () => {\n        const count = countRequest.result;\n        \n        if (count > this.config.maxEntries) {\n          // Supprimer les plus anciens\n          const index = store.index('timestamp');\n          const request = index.openCursor();\n          let deletedCount = 0;\n          const toDelete = count - this.config.maxEntries;\n          \n          request.onsuccess = (event) => {\n            const cursor = (event.target as IDBRequest).result;\n            \n            if (cursor && deletedCount < toDelete) {\n              cursor.delete();\n              deletedCount++;\n              cursor.continue();\n            } else {\n              resolve();\n            }\n          };\n          \n          request.onerror = () => reject(request.error);\n        } else {\n          resolve();\n        }\n      };\n      \n      countRequest.onerror = () => reject(countRequest.error);\n    });\n  }\n}\n","import { Logger } from './logger';\nimport { ConsoleTransport } from './transport/console';\nimport { HttpTransport } from './transport/http';\nimport { LocalStorageTransport } from './transport/localStorage';\nimport { IndexedDBTransport } from './transport/indexedDB';\nimport { AutoTracker } from './auto-tracker';\nimport { generateId, getBrowserInfo, getDeviceInfo } from './utils';\nimport type {\n  ShadowTraceConfig,\n  ShadowTraceInstance,\n  LogLevel,\n  LogContext,\n  Transport,\n  AutoTrackConfig,\n  TransportType\n} from '../types/index';\n\nexport class ShadowTrace implements ShadowTraceInstance {\n  private logger: Logger;\n  private autoTracker?: AutoTracker;\n  private config: Required<ShadowTraceConfig>;\n  private context: LogContext;\n  private isInitialized = false;\n\n  constructor(config: ShadowTraceConfig = {}) {\n    // Configuration par défaut\n    this.config = {\n      apiKey: config.apiKey || '',\n      environment: config.environment || 'development',\n      debug: config.debug ?? true,\n      autoTrack: config.autoTrack ?? true,\n      autoTrackConfig: config.autoTrackConfig || {\n        clicks: true,\n        inputs: true,\n        scrolls: false,\n        navigation: true,\n        errors: true,\n        performance: false,\n        selectors: {\n          ignore: ['[data-shadow-ignore]', '.shadow-ignore'],\n          track: []\n        } as { ignore?: string[]; track?: string[] }\n      },\n      transports: config.transports || ['console'],\n      httpConfig: config.httpConfig || {\n        endpoint: '/api/logs',\n        headers: {},\n        timeout: 5000,\n        retries: 3,\n        batchSize: 10\n      },\n      level: config.level || 'debug',\n      sampling: config.sampling ?? 1,\n      bufferSize: config.bufferSize || 100,\n      flushInterval: config.flushInterval || 10000,\n      context: config.context || {},\n      filters: config.filters || [],\n      onError: config.onError || (() => {})\n    };\n\n    // Contexte par défaut\n    this.context = {\n      sessionId: generateId(),\n      url: typeof window !== 'undefined' ? window.location.href : '',\n      referrer: typeof document !== 'undefined' ? document.referrer : '',\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',\n      viewport: typeof window !== 'undefined' ? {\n        width: window.innerWidth,\n        height: window.innerHeight\n      } : { width: 0, height: 0 },\n      device: (() => {\n        const deviceInfo = getDeviceInfo();\n        return {\n          ...deviceInfo,\n          browser: deviceInfo.browser === null ? undefined : deviceInfo.browser\n        };\n      })(),\n      ...this.config.context\n    };\n\n    // Initialisation du logger\n    this.logger = new Logger({\n      level: this.config.level,\n      context: this.context,\n      bufferSize: this.config.bufferSize,\n      flushInterval: this.config.flushInterval,\n      filters: this.config.filters,\n      sampling: this.config.sampling,\n      onError: this.config.onError\n    });\n\n    // Ajout des transports\n    this.setupTransports();\n  }\n\n  init(): void {\n    if (this.isInitialized) {\n      return;\n    }\n\n    // Initialisation de l'auto-tracking\n    if (this.config.autoTrack && typeof window !== 'undefined') {\n      this.autoTracker = new AutoTracker(this.config.autoTrackConfig, (event) => {\n        this.track(event.type, event);\n      });\n      this.autoTracker.start();\n    }\n\n    // Capture des erreurs globales\n    if (typeof window !== 'undefined') {\n      this.setupGlobalErrorHandling();\n    }\n\n    this.isInitialized = true;\n    this.info('ShadowTrace initialized', { \n      config: { \n        environment: this.config.environment,\n        autoTrack: this.config.autoTrack,\n        transports: this.config.transports \n      } \n    });\n  }\n\n  debug(message: string, data?: any): void {\n    this.logger.log('debug', message, data);\n  }\n\n  info(message: string, data?: any): void {\n    this.logger.log('info', message, data);\n  }\n\n  warn(message: string, data?: any): void {\n    this.logger.log('warn', message, data);\n  }\n\n  error(message: string, data?: any): void {\n    this.logger.log('error', message, data);\n  }\n\n  track(event: string, data?: any): void {\n    this.logger.log('info', `Event: ${event}`, { \n      event, \n      ...data,\n      _type: 'track'\n    });\n  }\n\n  setContext(context: Partial<LogContext>): void {\n    this.context = { ...this.context, ...context };\n    this.logger.updateContext(this.context);\n  }\n\n  setUserId(userId: string): void {\n    this.setContext({ userId });\n  }\n\n  addTransport(transport: Transport): void {\n    this.logger.addTransport(transport);\n  }\n\n  async flush(): Promise<void> {\n    await this.logger.flush();\n  }\n\n  destroy(): void {\n    if (this.autoTracker) {\n      this.autoTracker.stop();\n    }\n    this.logger.destroy();\n    this.isInitialized = false;\n  }\n\n  private setupTransports(): void {\n    (this.config.transports as TransportType[]).forEach((transportType: TransportType) => {\n      try {\n        switch (transportType) {\n          case 'console':\n            this.logger.addTransport(new ConsoleTransport(this.config.debug));\n            break;\n          case 'http':\n            if (this.config.httpConfig) {\n              this.logger.addTransport(new HttpTransport(this.config.httpConfig));\n            }\n            break;\n          case 'localStorage':\n            if (typeof localStorage !== 'undefined') {\n              this.logger.addTransport(new LocalStorageTransport());\n            }\n            break;\n        }\n      } catch (error) {\n        console.warn(`Failed to setup transport: ${transportType}`, error);\n      }\n    });\n  }\n\n  private setupGlobalErrorHandling(): void {\n    // Erreurs JavaScript\n    window.addEventListener('error', (event) => {\n      this.error('JavaScript Error', {\n        message: event.message,\n        filename: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        error: event.error?.stack,\n        _type: 'javascript_error'\n      });\n    });\n\n    // Promesses rejetées\n    window.addEventListener('unhandledrejection', (event) => {\n      this.error('Unhandled Promise Rejection', {\n        reason: event.reason,\n        promise: event.promise,\n        _type: 'promise_rejection'\n      });\n    });\n\n    // Erreurs de ressources\n    window.addEventListener('error', (event) => {\n      if (event.target !== window) {\n        this.error('Resource Error', {\n          element: (event.target as any)?.tagName,\n          source: (event.target as any)?.src || (event.target as any)?.href,\n          _type: 'resource_error'\n        });\n      }\n    }, true);\n  }\n}\n\n// Instance globale par défaut\nlet defaultInstance: ShadowTrace | null = null;\n\nexport const createLogger = (config?: ShadowTraceConfig): ShadowTrace => {\n  return new ShadowTrace(config);\n};\n\nexport const getDefaultLogger = (): ShadowTrace => {\n  if (!defaultInstance) {\n    defaultInstance = new ShadowTrace();\n  }\n  return defaultInstance;\n};\n\n// API simplifiée pour usage direct\nexport const init = (config?: ShadowTraceConfig): void => {\n  if (defaultInstance) {\n    defaultInstance.destroy();\n  }\n  defaultInstance = new ShadowTrace(config);\n  defaultInstance.init();\n};\n\nexport const debug = (message: string, data?: any): void => {\n  getDefaultLogger().debug(message, data);\n};\n\nexport const info = (message: string, data?: any): void => {\n  getDefaultLogger().info(message, data);\n};\n\nexport const warn = (message: string, data?: any): void => {\n  getDefaultLogger().warn(message, data);\n};\n\nexport const error = (message: string, data?: any): void => {\n  getDefaultLogger().error(message, data);\n};\n\nexport const track = (event: string, data?: any): void => {\n  getDefaultLogger().track(event, data);\n};\n\n// Exports\nexport { Logger } from './logger';\nexport { ConsoleTransport } from './transport/console';\nexport { HttpTransport } from './transport/http';\nexport { LocalStorageTransport } from './transport/localStorage';\nexport { IndexedDBTransport } from './transport/indexedDB';"],"names":[],"mappings":"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"}